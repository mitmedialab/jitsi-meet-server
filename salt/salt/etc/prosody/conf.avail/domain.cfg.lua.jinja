VirtualHost "{{ server_id }}"
        -- enabled = false -- Remove this line to enable this host
        authentication = "anonymous"
        -- Assign this host a certificate for TLS, otherwise it would use the one
        -- set in the global section (if any).
        -- Note that old-style SSL on port 5223 only supports one certificate, and will always
        -- use the global one.
        ssl = {
                key = "/etc/prosody/certs/{{ server_id }}.key";
                certificate = "/etc/prosody/certs/{{ server_id }}.crt";
        }
        -- we need bosh
        modules_enabled = {
            "bosh";
            "pubsub";
            "ping"; -- Enable mod_ping
        }

Component "conference.{{ server_id }}" "muc"
admins = { "focus@auth.{{ server_id }}" }

Component "jitsi-videobridge.{{ server_id }}"
    component_secret = "{{ jitsi_videobridge_password }}"

VirtualHost "auth.{{ server_id }}"
        authentication = "internal_plain"

Component "focus.{{ server_id }}"
    component_secret = "{{ jicofo_password }}"

-- vi: ft=lua
